<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign In</title>
<link rel="stylesheet" href="./styles/signin.css">
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'hi',
    includedLanguages: 'en,hi,bn,mr,te,ta,gu,ur,kn,or,ml,pa,as',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
    autoDisplay: false
  }, 'google_translate_element');
}
</script>
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>

<body>

<div id="google_translate_element" style="display: none;"></div>
<div style="position: absolute; top: 10px; right: 10px; z-index: 1000;">
    <select id="language" onchange="changeLanguage(this.value)" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc; background: white;">
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
      <option value="en">English</option>
      <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
      <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
      <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
      <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
      <option value="ur">ÿßÿ±ÿØ‡•Ç (Urdu)</option>
      <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
      <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Oriya)</option>
      <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
      <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
      <option value="as">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ (Assamese)</option>
    </select>
</div>

<div class="container">

    <div class="login-card">

        <h2>Sign In</h2>

        <form id="loginForm">

            <input type="text" id="loginKey" placeholder="Enter Email or Mobile" required>
            <input type="password" id="password" placeholder="Enter Password" required>

            <button type="submit">Login</button>

        </form>

       

        <!-- üîó THIS IS IMPORTANT -->
        <p>Don't have an account?
            <a href="signup.html">Sign Up</a>
        </p>

    </div>

</div>

<script>
function changeLanguage(langCode) {
    const combo = document.querySelector('.goog-te-combo');
    if (combo) {
        combo.value = langCode;
        combo.dispatchEvent(new Event('change'));
    }
}

document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const loginKey = document.getElementById('loginKey').value;
    const password = document.getElementById('password').value;

    try {
        const response = await fetch('./api/auth/signin', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ loginKey, password })
        });
        const data = await response.json();
        if (response.ok) {
            localStorage.setItem('token', data.token);
            localStorage.setItem('user', JSON.stringify(data.user));
            window.location.href = 'index.html'; // Adjust as per your home page
        } else {
            alert(data.message || 'Login failed');
        }
    } catch (err) {
        console.error(err);
        alert('Error during login');
    }
});
</script>

</body>
</html>