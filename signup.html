<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Account</title>
<link rel="stylesheet" href="./styles/signup.css">
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'hi',
    includedLanguages: 'en,hi,bn,mr,te,ta,gu,ur,kn,or,ml,pa,as',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
    autoDisplay: false
  }, 'google_translate_element');
}
</script>
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>

<body>

<div id="google_translate_element" style="display: none;"></div>
<div style="position: absolute; top: 10px; right: 10px; z-index: 1000;">
    <select id="language" onchange="changeLanguage(this.value)" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc; background: white;">
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
      <option value="en">English</option>
      <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
      <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
      <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
      <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
      <option value="ur">ÿßÿ±ÿØ‡•Ç (Urdu)</option>
      <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
      <option value="or">‡¨ì‡¨°‡¨º‡§ø‡¨Ü (Oriya)</option>
      <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
      <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
      <option value="as">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ (Assamese)</option>
    </select>
</div>

<div class="container">

    <div class="signup-card">

        <h2>Create Account</h2>

        <form id="signupForm">

            <input type="text" id="fullName" placeholder="Full Name" required>
            <input type="text" id="mobileNumber" placeholder="Mobile Number" required>
            <input type="email" id="email" placeholder="Email" required>
            <input type="password" id="password" placeholder="Password" required>
            <input type="password" id="confirmPassword" placeholder="Confirm Password" required>

            <button type="submit">Sign Up</button>

        </form>

        <!-- üîó BACK TO LOGIN -->
        <p>Already have an account?
            <a href="signin.html">Login</a>
        </p>

    </div>

</div>

<script>
function changeLanguage(langCode) {
    const combo = document.querySelector('.goog-te-combo');
    if (combo) {
        combo.value = langCode;
        combo.dispatchEvent(new Event('change'));
    }
}

document.getElementById('signupForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const fullName = document.getElementById('fullName').value;
    const mobileNumber = document.getElementById('mobileNumber').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;

    if (password !== confirmPassword) {
        alert('Passwords do not match');
        return;
    }

    try {
        const response = await fetch('./api/auth/signup', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ fullName, mobileNumber, email, password })
        });
        const data = await response.json();
        if (response.ok) {
            window.location.href = 'signin.html';
        } else {
            alert(data.message || 'Signup failed');
        }
    } catch (err) {
        console.error(err);
        alert('Error during signup');
    }
});
</script>

</body>
</html>